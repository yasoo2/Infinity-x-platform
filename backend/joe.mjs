/**\n * ğŸš€ Joe Standalone Orchestrator - Your Command-Line Agent\n * @version 2.0.0\n * This script is the entry point for running the Joe agent from the command line.\n * It initializes all necessary services, takes a task as input,\n * creates a plan, and executes it using the full suite of available tools.\n *\n * How to Use (after integration):\n * npm run joe -- \"Your task description here\"\n */\n\nimport dotenv from \'dotenv\';\ndotenv.config();\n\nimport toolManager from \'./src/services/tools/tool-manager.service.mjs\';\nimport { createPlan } from \'./src/services/ai/ai-engine.service.mjs\';\n\n// --- Main Task Acquisition ---\nconst mainTask = process.argv.slice(2).join(\' \');\n\nif (!mainTask) {\n    console.error(\'âŒ ERROR: No task provided.\');\n    console.error(\'Usage: node backend/joe.mjs \\\"Your task description here\\\"\');\n    console.error(\'Or after integration: npm run joe -- \\\"Your task description here\\\"\');\n    process.exit(1);\n}\n\n// --- Main Execution Logic ---\nasync function main() {\n    // 1. Initialize Services\n    console.log(\'ğŸ”„ Initializing services...\');\n    try {\n        await toolManager.initialize();\n        console.log(`âœ… Services initialized. ${toolManager.tools.size} tools ready.`);\n    } catch (error) {\n        console.error(\'âŒ CRITICAL: Failed to initialize the ToolManager.\', error);\n        process.exit(1);\n    }\n    \n    console.log(\'--------------------------------------------------\');\n    console.log(`ğŸ¯ Starting main task: \\\"${mainTask}\\\"\`);\n    console.log(\'--------------------------------------------------\');\n\n    try {\n        // 2. Create a plan\n        console.log(\'ğŸ§  Step 1: Creating a plan...\');\n        const planResponse = await createPlan(mainTask, {\n            workingDirectory: process.cwd()\n        });\n\n        if (!planResponse.success || !planResponse.plan || planResponse.plan.length === 0) {\n            console.error(\'âŒ Failed to create a valid plan.\');\n            return;\n        }\n        \n        const plan = planResponse.plan;\n        console.log(\'âœ… Plan created successfully:\');\n        console.log(JSON.stringify(plan, null, 2));\n        console.log(\'--------------------------------------------------\');\n\n        // 3. Execute the plan\n        console.log(\'ğŸš€ Step 2: Executing the plan...\');\n        \n        let finalSummary = [];\n\n        for (const step of plan) {\n            console.log(`\\nâ–¶ï¸ Executing Step: ${step.thought}`);\n            try {\n                const result = await toolManager.execute(step.toolName, step.args);\n                finalSummary.push({\n                    step: step.thought,\n                    tool: step.toolName,\n                    args: step.args,\n                    status: \'success\',\n                    result: result\n                });\n                 console.log(`âœ”ï¸ Step successful. Result:`, result);\n            } catch (e) {\n                console.error(`âŒ Step failed: ${e.message}`);\n                finalSummary.push({\n                    step: step.thought,\n                    tool: step.toolName,\n                    args: step.args,\n                    status: \'failure\',\n                    error: e.message\n                });\n                // Stop execution on failure\n                console.error(\'ğŸ“Š Execution Summary:\');\n                console.error(JSON.stringify(finalSummary, null, 2));\n                throw new Error(`Execution stopped due to a failed step: ${step.thought}`);\n            }\n        }\n        \n        console.log(\'--------------------------------------------------\');\n        console.log(\'ğŸ‰ğŸ‰ğŸ‰ Main task completed successfully! ğŸ‰ğŸ‰ğŸ‰\');\n        console.log(\'ğŸ“Š Final Summary:\');\n        console.log(JSON.stringify(finalSummary, null, 2));\n\n    } catch (error) {\n        console.error(`\\nâŒ A critical error occurred in the orchestrator: ${error.message}`);\n        process.exit(1);\n    }\n}\n\n// Start the whole process\nmain();\n