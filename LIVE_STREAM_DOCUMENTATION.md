# ุชูุซูู ูุธุงู ุงูุจุซ ุงูุญู (Live Streaming System)

## ๐บ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูุจุซ ุงูุญู ูููุฑ ุนุฑุถุงู ูุจุงุดุฑุงู ููู ุงูููุช ุงููุนูู ูุณุทุญ ุงูููุชุจ ุงูุฎุงุต ุจูุธุงู ุฌู ุงูุฐูุงุก ุงูุงุตุทูุงุนู. ูููู ูููุณุชุฎุฏููู ูุฑุงูุจุฉ ุฌููุน ุงูุนูููุงุช ุงูุชู ูููู ุจูุง ุงููุธุงู ูุน ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ.

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุจุซ ุงูุญู ุงููุจุงุดุฑ
- ุนุฑุถ ุณุทุญ ุงูููุชุจ ุจุดูู ูุจุงุดุฑ
- ุชุญุฏูุซ ุงูุฅุทุงุฑุงุช ูู ุงูููุช ุงููุนูู
- ุฏุนู ุฏูุงุช ุดุงุดุฉ ูุชุนุฏุฏุฉ (640x480 ุฅูู 1920x1080)

### 2. ุงูุชุญูู ุจุงูุฃุฏุงุก
- ุชุนุฏูู ูุนุฏู ุงูุฅุทุงุฑุงุช (1-30 FPS)
- ุงูุชุญูู ุจุฌูุฏุฉ ุงูุตูุฑุฉ (1-100%)
- ุงุฎุชูุงุฑ ุฏูุฉ ุงูุดุงุดุฉ ุงูููุงุณุจุฉ

### 3. ุงูุฅุญุตุงุฆูุงุช ุงููุนููุฉ
- ูุนุฏู ุงูุฅุทุงุฑุงุช (FPS)
- ุฅุฌูุงูู ุงูุฅุทุงุฑุงุช ุงููุฑุณูุฉ
- ุงููุทุงู ุงูุชุฑุฏุฏู ุงููุณุชุฎุฏู
- ุงูููุช ุงููููุถู
- ุนุฏุฏ ุงููุดุชุฑููู

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### ุงูุฎุงุฏู ุงูุฎููู (Backend)

#### 1. ุฎุฏูุฉ ุงูุจุซ ุงูุญู (`liveStreamingService.mjs`)
```javascript
// ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ูุฅุฏุงุฑุฉ ุงูุจุซ
class LiveStreamingService extends EventEmitter {
  - startStreaming()      // ุจุฏุก ุงูุจุซ
  - stopStreaming()       // ุฅููุงู ุงูุจุซ
  - captureScreen()       // ุงูุชูุงุท ุงูุดุงุดุฉ
  - broadcastFrame()      // ุจุซ ุงูุฅุทุงุฑ
  - subscribe()           // ุงูุงุดุชุฑุงู ูู ุงูุจุซ
  - getStats()            // ุงูุญุตูู ุนูู ุงูุฅุญุตุงุฆูุงุช
}
```

#### 2. ุฎุงุฏู WebSocket (`liveStreamWebSocket.mjs`)
```javascript
// ุฅุฏุงุฑุฉ ุงูุงุชุตุงูุงุช ุงููุนููุฉ ูุน ุงูุนููุงุก
class LiveStreamWebSocketServer {
  - setupWebSocketServer()     // ุฅุนุฏุงุฏ ุงูุฎุงุฏู
  - handleClientMessage()      // ูุนุงูุฌุฉ ุฑุณุงุฆู ุงูุนููู
  - broadcastToAll()           // ุงูุจุซ ุฅูู ุฌููุน ุงูุนููุงุก
  - getConnectedClients()      // ุนุฏุฏ ุงูุนููุงุก ุงููุชุตููู
}
```

#### 3. ุฑุงูุชุฑ API (`liveStreamRouter.mjs`)
```
POST   /api/live-stream/start              // ุจุฏุก ุงูุจุซ
POST   /api/live-stream/stop               // ุฅููุงู ุงูุจุซ
GET    /api/live-stream/status             // ุญุงูุฉ ุงูุจุซ
POST   /api/live-stream/set-frame-rate     // ุชุนููู ูุนุฏู ุงูุฅุทุงุฑุงุช
POST   /api/live-stream/set-quality        // ุชุนููู ุฌูุฏุฉ ุงูุตูุฑุฉ
POST   /api/live-stream/set-resolution     // ุชุนููู ุงูุฏูุฉ
GET    /api/live-stream/frame              // ุงูุญุตูู ุนูู ุงูุฅุทุงุฑ ุงูุญุงูู
```

### ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)

#### 1. ูููู ุนุฑุถ ุงูุจุซ (`LiveStreamViewer.jsx`)
- ุนุฑุถ ุงูุฅุทุงุฑุงุช ุนูู Canvas
- ุงูุชุญูู ุจุงูุจุซ (ุชุดุบูู/ุฅููุงู)
- ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
- ุฃุฏูุงุช ุงูุชุญูู ุจุงูุฃุฏุงุก

#### 2. Hook ูุฎุตุต (`useLiveStream.js`)
- ุฅุฏุงุฑุฉ ุงูุงุชุตุงู ุจู WebSocket
- ูุนุงูุฌุฉ ุงูุฅุทุงุฑุงุช
- ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
- ุฅุฏุงุฑุฉ ุงูุญุงูุฉ

#### 3. ุตูุญุฉ ุงูุจุซ ุงูุญู (`LiveStreamPage.jsx`)
- ูุงุฌูุฉ ูุงููุฉ ููุจุซ
- ุนุฑุถ ูุนูููุงุช ุงููุธุงู
- ุฅุนุฏุงุฏุงุช ูุชูุฏูุฉ
- ูุนูููุงุช ูููุฏุฉ

## ๐ ููุงุท ุงูุงุชุตุงู (WebSocket)

### ุงูุงุชุตุงู ุงูุฃููู
```javascript
// ุงูุนููู ูุชุตู ุจู WebSocket
const ws = new WebSocket('ws://localhost:10000/ws/live-stream');

// ุงูุฎุงุฏู ูุฑุณู ุฑุณุงูุฉ ุชุฑุญูุจ
{
  type: 'connected',
  message: 'ุชู ุงูุงุชุตุงู ุจุฎุฏูุฉ ุงูุจุซ ุงูุญู',
  stats: { ... }
}
```

### ุงุณุชูุจุงู ุงูุฅุทุงุฑุงุช
```javascript
{
  type: 'frame',
  timestamp: 1699000000000,
  size: 45000,
  data: 'base64-encoded-jpeg',
  stats: {
    fps: 2.5,
    totalFrames: 100,
    bandwidth: 4500000,
    uptime: '00:05:30'
  }
}
```

### ุฑุณุงุฆู ุงูุชุญูู
```javascript
// ุชุนููู ูุนุฏู ุงูุฅุทุงุฑุงุช
ws.send(JSON.stringify({
  type: 'set-frame-rate',
  payload: { fps: 5 }
}));

// ุชุนููู ุฌูุฏุฉ ุงูุตูุฑุฉ
ws.send(JSON.stringify({
  type: 'set-quality',
  payload: { quality: 80 }
}));

// ุชุนููู ุงูุฏูุฉ
ws.send(JSON.stringify({
  type: 'set-resolution',
  payload: { width: 1280, height: 720 }
}));
```

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ูุนุฏู ุงูุฅุทุงุฑุงุช (FPS)
ูุชู ุญุณุงุจู ุจูุงุกู ุนูู ุนุฏุฏ ุงูุฅุทุงุฑุงุช ุงููุฑุณูุฉ ูู ุงูุซุงููุฉ:
```
FPS = (totalFrames * 1000) / uptime_in_ms
```

### ุงููุทุงู ุงูุชุฑุฏุฏู
ูุฌููุน ุญุฌู ุฌููุน ุงูุฅุทุงุฑุงุช ุงููุฑุณูุฉ:
```
Bandwidth = sum(frame_sizes)
```

### ุงูููุช ุงููููุถู
ุงูููุช ููุฐ ุจุฏุก ุงูุจุซ:
```
Uptime = current_time - start_time
```

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุจุฏุก ุงูุจุซ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
```javascript
// ุงูุฐูุงุจ ุฅูู ุตูุญุฉ ุงูุจุซ ุงูุญู
navigate('/live-stream');

// ุงุถุบุท ุนูู ุฒุฑ ุงูุชุดุบูู
toggleStreaming();
```

### 2. ุงูุชุญูู ุจุงูุฃุฏุงุก
```javascript
// ุชุนุฏูู ูุนุฏู ุงูุฅุทุงุฑุงุช
updateFrameRate(5); // 5 FPS

// ุชุนุฏูู ุฌูุฏุฉ ุงูุตูุฑุฉ
updateQuality(70); // 70%

// ุชุนุฏูู ุงูุฏูุฉ
updateResolution(1280, 720); // HD
```

### 3. ูุฑุงูุจุฉ ุงูุฅุญุตุงุฆูุงุช
```javascript
// ุงูุญุตูู ุนูู ุงูุฅุญุตุงุฆูุงุช ุงูุญุงููุฉ
const stats = liveStream.stats;
console.log(`FPS: ${stats.fps}`);
console.log(`Total Frames: ${stats.totalFrames}`);
console.log(`Uptime: ${stats.uptime}`);
```

## ๐ง ุงูุชุซุจูุช ูุงูุชูููู

### ุงููุชุทูุจุงุช
- Node.js 16+
- Express 4.18+
- WebSocket (ws)
- Sharp (ููุนุงูุฌุฉ ุงูุตูุฑ)

### ุงูุชุซุจูุช
```bash
# ุชุซุจูุช ุงูุชุจุนูุงุช ุงููุทููุจุฉ
npm install sharp

# ูู ุงูุฎุงุฏู ุงูุฎููู
cd backend
npm install

# ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
cd dashboard-x
pnpm install
```

### ุงูุชูููู
```bash
# ูู backend/.env
LIVE_STREAM_ENABLED=true
LIVE_STREAM_FPS=2
LIVE_STREAM_QUALITY=70
LIVE_STREAM_WIDTH=1280
LIVE_STREAM_HEIGHT=720
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุนุฏู ุงูุงุชุตุงู ุจู WebSocket
**ุงูุญู:**
- ุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุนูู ุนูู ุงูุจูุฑุช ุงูุตุญูุญ
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS
- ุชุญูู ูู ุฃู WebSocket ููุนู ูู ุงูุฎุงุฏู

### ุงููุดููุฉ: ุงูุฅุทุงุฑุงุช ุจุทูุฆุฉ
**ุงูุญู:**
- ููู ูุนุฏู ุงูุฅุทุงุฑุงุช (FPS)
- ููู ุฌูุฏุฉ ุงูุตูุฑุฉ
- ููู ุฏูุฉ ุงูุดุงุดุฉ

### ุงููุดููุฉ: ุงุณุชููุงู ุนุงูู ูููุทุงู ุงูุชุฑุฏุฏู
**ุงูุญู:**
- ููู ุฌูุฏุฉ ุงูุตูุฑุฉ
- ููู ุฏูุฉ ุงูุดุงุดุฉ
- ููู ูุนุฏู ุงูุฅุทุงุฑุงุช

## ๐ ุชุญุณููุงุช ูุณุชูุจููุฉ

1. **ุงูุชูุงุท ุงูุดุงุดุฉ ุงูุญูููู**
   - ุงุณุชุฎุฏุงู ffmpeg ุฃู gnome-screenshot
   - ุฏุนู ุฃูุธูุฉ ุชุดุบูู ูุชุนุฏุฏุฉ

2. **ุถุบุท ุฃูุถู**
   - ุงุณุชุฎุฏุงู H.264 ุฃู VP9
   - ุถุบุท ูุชููู ุจูุงุกู ุนูู ุงููุทุงู ุงูุชุฑุฏุฏู

3. **ููุฒุงุช ูุชูุฏูุฉ**
   - ุชุณุฌูู ุงูุจุซ
   - ููุทุงุช ุงูุดุงุดุฉ
   - ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ

4. **ุงูุฃุฏุงุก**
   - ูุนุงูุฌุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท
   - ุชุฎุฒูู ูุคูุช ุฐูู
   - ุชุญุณูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู**: ุชุฃูุฏ ูู ุชูุนูู ุงููุตุงุฏูุฉ ูุจู ุงูุณูุงุญ ุจุงููุตูู ุฅูู ุงูุจุซ ุงูุญู
2. **ุงูุฃุฏุงุก**: ูุฏ ูุคุซุฑ ุงูุจุซ ุงูุญู ุนูู ุฃุฏุงุก ุงููุธุงูุ ุงุณุชุฎุฏู ุงูุฅุนุฏุงุฏุงุช ุงูููุงุณุจุฉ
3. **ุงููุทุงู ุงูุชุฑุฏุฏู**: ุฑุงูุจ ุงุณุชููุงู ุงููุทุงู ุงูุชุฑุฏุฏู ุฎุงุตุฉ ูุน ุนุฏุฉ ูุดุชุฑููู
4. **ุงูุฎุตูุตูุฉ**: ุชุฃูุฏ ูู ุนุฏู ุจุซ ูุนูููุงุช ุญุณุงุณุฉ

## ๐ ุงูุฑูุงุจุท ุฐุงุช ุงูุตูุฉ

- [WebSocket Documentation](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
- [Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
- [React Hooks](https://react.dev/reference/react/hooks)
- [Express.js](https://expressjs.com/)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 5 ููููุจุฑ 2025
**ุงูุฅุตุฏุงุฑ:** 1.0.0
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ
